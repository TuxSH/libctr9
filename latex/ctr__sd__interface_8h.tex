\hypertarget{ctr__sd__interface_8h}{}\section{include/ctr9/io/ctr\+\_\+sd\+\_\+interface.h File Reference}
\label{ctr__sd__interface_8h}\index{include/ctr9/io/ctr\+\_\+sd\+\_\+interface.\+h@{include/ctr9/io/ctr\+\_\+sd\+\_\+interface.\+h}}
{\ttfamily \#include \char`\"{}ctr\+\_\+io\+\_\+interface.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}sdmmc/sdmmc.\+h\char`\"{}}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structctr__sd__interface}{ctr\+\_\+sd\+\_\+interface}
\begin{DoxyCompactList}\small\item\em io interface object for accessing the SD card. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{ctr__sd__interface_8h_a96ee624c93ed43de6c8eb912719009d1}{ctr\+\_\+sd\+\_\+interface\+\_\+initialize} (\hyperlink{structctr__sd__interface}{ctr\+\_\+sd\+\_\+interface} $\ast$io)
\begin{DoxyCompactList}\small\item\em Initialize the given SD io interface object. \end{DoxyCompactList}\item 
void \hyperlink{ctr__sd__interface_8h_a3db264711e4f7d7e92de2572f4c232fb}{ctr\+\_\+sd\+\_\+interface\+\_\+destroy} (\hyperlink{structctr__sd__interface}{ctr\+\_\+sd\+\_\+interface} $\ast$io)
\begin{DoxyCompactList}\small\item\em Destroys the given SD io interface object. \end{DoxyCompactList}\item 
int \hyperlink{ctr__sd__interface_8h_adc13d7a7fc411bf233eceb0b1b9d1827}{ctr\+\_\+sd\+\_\+interface\+\_\+read} (void $\ast$io, void $\ast$buffer, size\+\_\+t buffer\+\_\+size, size\+\_\+t position, size\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Reads bytes from the given io interface. \end{DoxyCompactList}\item 
int \hyperlink{ctr__sd__interface_8h_a82862bf46fafd91f74d4e02236d32aa1}{ctr\+\_\+sd\+\_\+interface\+\_\+write} (void $\ast$io, const void $\ast$buffer, size\+\_\+t buffer\+\_\+size, size\+\_\+t position)
\begin{DoxyCompactList}\small\item\em Writes bytes to the given io interface. \end{DoxyCompactList}\item 
int \hyperlink{ctr__sd__interface_8h_a99c218f69dc4406a4813713014cf79c9}{ctr\+\_\+sd\+\_\+interface\+\_\+read\+\_\+sector} (void $\ast$io, void $\ast$buffer, size\+\_\+t buffer\+\_\+size, size\+\_\+t position, size\+\_\+t count)
\begin{DoxyCompactList}\small\item\em Reads sectors from the given io interface. \end{DoxyCompactList}\item 
int \hyperlink{ctr__sd__interface_8h_a98fd0fcf91518f7379ecea7b408cc770}{ctr\+\_\+sd\+\_\+interface\+\_\+write\+\_\+sector} (void $\ast$io, const void $\ast$buffer, size\+\_\+t buffer\+\_\+size, size\+\_\+t position)
\begin{DoxyCompactList}\small\item\em Writes sectors from the given io interface. \end{DoxyCompactList}\item 
size\+\_\+t \hyperlink{ctr__sd__interface_8h_a1b8fe22b43cf398057620f3a6d37b826}{ctr\+\_\+sd\+\_\+interface\+\_\+disk\+\_\+size} (void $\ast$io)
\begin{DoxyCompactList}\small\item\em Returns the size of the underlying disk for the given io interface. \end{DoxyCompactList}\item 
size\+\_\+t \hyperlink{ctr__sd__interface_8h_af93f0d29f42cda3cfe5b35e12c2ea81f}{ctr\+\_\+sd\+\_\+interface\+\_\+sector\+\_\+size} (void $\ast$io)
\begin{DoxyCompactList}\small\item\em Returns the size of the sectors used by the io interface, which is 512 bytes for SD cards. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}!ctr\+\_\+sd\+\_\+interface\+\_\+destroy@{ctr\+\_\+sd\+\_\+interface\+\_\+destroy}}
\index{ctr\+\_\+sd\+\_\+interface\+\_\+destroy@{ctr\+\_\+sd\+\_\+interface\+\_\+destroy}!ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}}
\subsubsection[{\texorpdfstring{ctr\+\_\+sd\+\_\+interface\+\_\+destroy(ctr\+\_\+sd\+\_\+interface $\ast$io)}{ctr_sd_interface_destroy(ctr_sd_interface *io)}}]{\setlength{\rightskip}{0pt plus 5cm}void ctr\+\_\+sd\+\_\+interface\+\_\+destroy (
\begin{DoxyParamCaption}
\item[{{\bf ctr\+\_\+sd\+\_\+interface} $\ast$}]{io}
\end{DoxyParamCaption}
)}\hypertarget{ctr__sd__interface_8h_a3db264711e4f7d7e92de2572f4c232fb}{}\label{ctr__sd__interface_8h_a3db264711e4f7d7e92de2572f4c232fb}


Destroys the given SD io interface object. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em io} & SD io interface to deinitialize.\\
\hline
\end{DoxyParams}
\begin{DoxyPostcond}{Postcondition}
The io interface has been destroyed and cannot be used for accessing the SD card without being re-\/initialized. 
\end{DoxyPostcond}
\index{ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}!ctr\+\_\+sd\+\_\+interface\+\_\+disk\+\_\+size@{ctr\+\_\+sd\+\_\+interface\+\_\+disk\+\_\+size}}
\index{ctr\+\_\+sd\+\_\+interface\+\_\+disk\+\_\+size@{ctr\+\_\+sd\+\_\+interface\+\_\+disk\+\_\+size}!ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}}
\subsubsection[{\texorpdfstring{ctr\+\_\+sd\+\_\+interface\+\_\+disk\+\_\+size(void $\ast$io)}{ctr_sd_interface_disk_size(void *io)}}]{\setlength{\rightskip}{0pt plus 5cm}size\+\_\+t ctr\+\_\+sd\+\_\+interface\+\_\+disk\+\_\+size (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{io}
\end{DoxyParamCaption}
)}\hypertarget{ctr__sd__interface_8h_a1b8fe22b43cf398057620f3a6d37b826}{}\label{ctr__sd__interface_8h_a1b8fe22b43cf398057620f3a6d37b826}


Returns the size of the underlying disk for the given io interface. 

\begin{DoxyReturn}{Returns}
The size of the N\+A\+ND as reported by it. 
\end{DoxyReturn}
\index{ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}!ctr\+\_\+sd\+\_\+interface\+\_\+initialize@{ctr\+\_\+sd\+\_\+interface\+\_\+initialize}}
\index{ctr\+\_\+sd\+\_\+interface\+\_\+initialize@{ctr\+\_\+sd\+\_\+interface\+\_\+initialize}!ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}}
\subsubsection[{\texorpdfstring{ctr\+\_\+sd\+\_\+interface\+\_\+initialize(ctr\+\_\+sd\+\_\+interface $\ast$io)}{ctr_sd_interface_initialize(ctr_sd_interface *io)}}]{\setlength{\rightskip}{0pt plus 5cm}int ctr\+\_\+sd\+\_\+interface\+\_\+initialize (
\begin{DoxyParamCaption}
\item[{{\bf ctr\+\_\+sd\+\_\+interface} $\ast$}]{io}
\end{DoxyParamCaption}
)}\hypertarget{ctr__sd__interface_8h_a96ee624c93ed43de6c8eb912719009d1}{}\label{ctr__sd__interface_8h_a96ee624c93ed43de6c8eb912719009d1}


Initialize the given SD io interface object. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em io} & SD io interface to initialize.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, anything else on a failure. Failures can stem from the SD card not being inserted, or some more severe underlying problem. 
\end{DoxyReturn}
\index{ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}!ctr\+\_\+sd\+\_\+interface\+\_\+read@{ctr\+\_\+sd\+\_\+interface\+\_\+read}}
\index{ctr\+\_\+sd\+\_\+interface\+\_\+read@{ctr\+\_\+sd\+\_\+interface\+\_\+read}!ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}}
\subsubsection[{\texorpdfstring{ctr\+\_\+sd\+\_\+interface\+\_\+read(void $\ast$io, void $\ast$buffer, size\+\_\+t buffer\+\_\+size, size\+\_\+t position, size\+\_\+t count)}{ctr_sd_interface_read(void *io, void *buffer, size_t buffer_size, size_t position, size_t count)}}]{\setlength{\rightskip}{0pt plus 5cm}int ctr\+\_\+sd\+\_\+interface\+\_\+read (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{io, }
\item[{void $\ast$}]{buffer, }
\item[{size\+\_\+t}]{buffer\+\_\+size, }
\item[{size\+\_\+t}]{position, }
\item[{size\+\_\+t}]{count}
\end{DoxyParamCaption}
)}\hypertarget{ctr__sd__interface_8h_adc13d7a7fc411bf233eceb0b1b9d1827}{}\label{ctr__sd__interface_8h_adc13d7a7fc411bf233eceb0b1b9d1827}


Reads bytes from the given io interface. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em io} & The io interface to use for reading. \\
\hline
\mbox{\tt out}  & {\em buffer} & Pointer to the buffer. \\
\hline
\mbox{\tt in}  & {\em buffer\+\_\+size} & The size of the buffer in bytes. \\
\hline
\mbox{\tt in}  & {\em position} & Position/address in the io interface to read from. \\
\hline
\mbox{\tt in}  & {\em count} & The number of bytes to read.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 upon success, anything else means an error. 
\end{DoxyReturn}
\index{ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}!ctr\+\_\+sd\+\_\+interface\+\_\+read\+\_\+sector@{ctr\+\_\+sd\+\_\+interface\+\_\+read\+\_\+sector}}
\index{ctr\+\_\+sd\+\_\+interface\+\_\+read\+\_\+sector@{ctr\+\_\+sd\+\_\+interface\+\_\+read\+\_\+sector}!ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}}
\subsubsection[{\texorpdfstring{ctr\+\_\+sd\+\_\+interface\+\_\+read\+\_\+sector(void $\ast$io, void $\ast$buffer, size\+\_\+t buffer\+\_\+size, size\+\_\+t position, size\+\_\+t count)}{ctr_sd_interface_read_sector(void *io, void *buffer, size_t buffer_size, size_t position, size_t count)}}]{\setlength{\rightskip}{0pt plus 5cm}int ctr\+\_\+sd\+\_\+interface\+\_\+read\+\_\+sector (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{io, }
\item[{void $\ast$}]{buffer, }
\item[{size\+\_\+t}]{buffer\+\_\+size, }
\item[{size\+\_\+t}]{position, }
\item[{size\+\_\+t}]{count}
\end{DoxyParamCaption}
)}\hypertarget{ctr__sd__interface_8h_a99c218f69dc4406a4813713014cf79c9}{}\label{ctr__sd__interface_8h_a99c218f69dc4406a4813713014cf79c9}


Reads sectors from the given io interface. 

SD card access uses 512 byte sectors.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em io} & The io interface to use for reading. \\
\hline
\mbox{\tt out}  & {\em buffer} & Pointer to the buffer. \\
\hline
\mbox{\tt in}  & {\em buffer\+\_\+size} & The size of the buffer in bytes. \\
\hline
\mbox{\tt in}  & {\em sector} & Sector position in the io interface to read from. \\
\hline
\mbox{\tt in}  & {\em count} & The number of sectors to read.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 upon success, anything else means an error. 
\end{DoxyReturn}
\index{ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}!ctr\+\_\+sd\+\_\+interface\+\_\+sector\+\_\+size@{ctr\+\_\+sd\+\_\+interface\+\_\+sector\+\_\+size}}
\index{ctr\+\_\+sd\+\_\+interface\+\_\+sector\+\_\+size@{ctr\+\_\+sd\+\_\+interface\+\_\+sector\+\_\+size}!ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}}
\subsubsection[{\texorpdfstring{ctr\+\_\+sd\+\_\+interface\+\_\+sector\+\_\+size(void $\ast$io)}{ctr_sd_interface_sector_size(void *io)}}]{\setlength{\rightskip}{0pt plus 5cm}size\+\_\+t ctr\+\_\+sd\+\_\+interface\+\_\+sector\+\_\+size (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{io}
\end{DoxyParamCaption}
)}\hypertarget{ctr__sd__interface_8h_af93f0d29f42cda3cfe5b35e12c2ea81f}{}\label{ctr__sd__interface_8h_af93f0d29f42cda3cfe5b35e12c2ea81f}


Returns the size of the sectors used by the io interface, which is 512 bytes for SD cards. 

\begin{DoxyReturn}{Returns}
512 bytes as the sector size for SD cards. 
\end{DoxyReturn}
\index{ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}!ctr\+\_\+sd\+\_\+interface\+\_\+write@{ctr\+\_\+sd\+\_\+interface\+\_\+write}}
\index{ctr\+\_\+sd\+\_\+interface\+\_\+write@{ctr\+\_\+sd\+\_\+interface\+\_\+write}!ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}}
\subsubsection[{\texorpdfstring{ctr\+\_\+sd\+\_\+interface\+\_\+write(void $\ast$io, const void $\ast$buffer, size\+\_\+t buffer\+\_\+size, size\+\_\+t position)}{ctr_sd_interface_write(void *io, const void *buffer, size_t buffer_size, size_t position)}}]{\setlength{\rightskip}{0pt plus 5cm}int ctr\+\_\+sd\+\_\+interface\+\_\+write (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{io, }
\item[{const void $\ast$}]{buffer, }
\item[{size\+\_\+t}]{buffer\+\_\+size, }
\item[{size\+\_\+t}]{position}
\end{DoxyParamCaption}
)}\hypertarget{ctr__sd__interface_8h_a82862bf46fafd91f74d4e02236d32aa1}{}\label{ctr__sd__interface_8h_a82862bf46fafd91f74d4e02236d32aa1}


Writes bytes to the given io interface. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em io} & The io interface to use for writing. \\
\hline
\mbox{\tt in}  & {\em buffer} & Pointer to the buffer. \\
\hline
\mbox{\tt in}  & {\em buffer\+\_\+size} & The size of the buffer, and the number of bytes to write. \\
\hline
\mbox{\tt in}  & {\em position} & Position/address in the io interface to write to.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 upon success, anything else means an error. 
\end{DoxyReturn}
\index{ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}!ctr\+\_\+sd\+\_\+interface\+\_\+write\+\_\+sector@{ctr\+\_\+sd\+\_\+interface\+\_\+write\+\_\+sector}}
\index{ctr\+\_\+sd\+\_\+interface\+\_\+write\+\_\+sector@{ctr\+\_\+sd\+\_\+interface\+\_\+write\+\_\+sector}!ctr\+\_\+sd\+\_\+interface.\+h@{ctr\+\_\+sd\+\_\+interface.\+h}}
\subsubsection[{\texorpdfstring{ctr\+\_\+sd\+\_\+interface\+\_\+write\+\_\+sector(void $\ast$io, const void $\ast$buffer, size\+\_\+t buffer\+\_\+size, size\+\_\+t position)}{ctr_sd_interface_write_sector(void *io, const void *buffer, size_t buffer_size, size_t position)}}]{\setlength{\rightskip}{0pt plus 5cm}int ctr\+\_\+sd\+\_\+interface\+\_\+write\+\_\+sector (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{io, }
\item[{const void $\ast$}]{buffer, }
\item[{size\+\_\+t}]{buffer\+\_\+size, }
\item[{size\+\_\+t}]{position}
\end{DoxyParamCaption}
)}\hypertarget{ctr__sd__interface_8h_a98fd0fcf91518f7379ecea7b408cc770}{}\label{ctr__sd__interface_8h_a98fd0fcf91518f7379ecea7b408cc770}


Writes sectors from the given io interface. 

SD card access uses 512 byte sectors.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em io} & The io interface to use for writing. \\
\hline
\mbox{\tt in}  & {\em buffer} & Pointer to the buffer. \\
\hline
\mbox{\tt in}  & {\em buffer\+\_\+size} & The size of the buffer, and the number of bytes to write. If the number is not a multiple of the sector size, this function will only write all the full sectors it can, ignoring the end of the buffer that doesn\textquotesingle{}t fit a sector. \\
\hline
\mbox{\tt in}  & {\em sector} & Sector Position in the io interface to write to.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 upon success, anything else means an error. 
\end{DoxyReturn}
